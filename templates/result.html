{% extends "base.html" %}
{% block content %}

<div class="max-w-4xl mx-auto">

    <!-- Title -->
    <h1 class="text-4xl font-extrabold text-center text-gray-800 mb-10">
        Scan Result
    </h1>

    <!-- White Card -->
    <div class="bg-white p-10 rounded-3xl shadow-2xl">

        <!-- Extracted Text -->
        <h2 class="text-2xl font-bold text-gray-700 mb-2">Extracted Text</h2>
        <p class="text-gray-600 whitespace-pre-line leading-relaxed mb-8">
            {{ extracted_text }}
        </p>

        <!-- Expiry Section -->
        <h2 class="text-2xl font-bold text-gray-700 mb-3">Expiry Status</h2>

        {% if expiry_status == "EXPIRED" %}
        <span class="px-4 py-2 bg-red-600 text-white rounded-lg text-lg font-semibold">
            ❌ Expired
        </span>

        {% elif expiry_status == "EXPIRING SOON" %}
        <span class="px-4 py-2 bg-yellow-500 text-white rounded-lg text-lg font-semibold">
            ⚠️ Expiring Soon
        </span>

        {% elif expiry_status == "VALID" %}
        <span class="px-4 py-2 bg-green-600 text-white rounded-lg text-lg font-semibold">
            ✔️ Valid
        </span>

        {% else %}
        <span class="px-4 py-2 bg-gray-500 text-white rounded-lg text-lg font-semibold">
            ❓ Unknown
        </span>
        {% endif %}

        <p class="mt-3 text-gray-600 mb-10">
            <strong>Detected Expiry Date:</strong> {{ expiry_date }}
        </p>


        <!-- Packaging Condition -->
        <h2 class="text-2xl font-bold text-gray-700 mb-2">Packaging Condition</h2>

        {% if "DAMAGED" in damage_status %}
        <p class="text-red-600 font-semibold mb-6">❌ {{ damage_status }}</p>
        {% else %}
        <p class="text-green-600 font-semibold mb-6">✔️ {{ damage_status }}</p>
        {% endif %}


        <!-- Processed Image -->
        <h2 class="text-2xl font-bold text-gray-700 mb-4">Processed Image (Before + After)</h2>

        <div class="flex justify-center mb-10">
            <img 
                src="{{ url_for('processed_file', filename=processed_image) }}"
                alt="Processed Image"
                class="rounded-xl shadow-xl border border-gray-300 max-w-full"
            >
        </div>


        <!-- Buttons -->
        <div class="flex justify-center gap-6">

            <a href="/" class="glass-btn">
                Scan Another
            </a>

            <a href="/history" class="glass-btn-subtle">
                View History
            </a>

        </div>

    </div>
</div>

{% endblock %}
